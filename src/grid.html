<template>
	<style>
		.sorting-arrow {
			float: right;
			margin-right: 10px;
			width: 20px;
			height: 20px;
		}
		
		.sorting-arrow.sorting-arrow-top {
			background: url(../images/a_up.png);
			background-size: 20px 20px;
		}
		
		.sorting-arrow.sorting-arrow-down {
			background: url(../images/a_down.png);
			background-size: 20px 20px;
		}
		
		.sorting-arrow.sorting-arrow-normal {
			background: url(../images/a_default.png);
			background-size: 20px 20px;
		}
	</style>
	<require from="./pager"></require>
	<div class="grid-container table  ${class}">
		<!-- Header table -->
		<div if.bind="showColumnHeaders" class="table-row table-head">
			<div repeat.for="$column of visibleColumns" class="${ $column.class !== '' ? $column.class : '' }" if.bind="isDisplayColumn($column.showColNameIf, $column.hideColNameIf, showColName)">
				<a if.bind="$column.nosort == false && $parent.sortable" click.trigger="$parent.sortChanged($column.field)">${ $column.heading }</a>
				<span if.bind="$column.nosort == true || !$parent.sortable">${ $column.heading } </span>
				<span if.bind="$column.filtering == 'true'">
					<span if.bind="$parent.sorting[$column.field] === 'desc'" click.trigger="$parent.sortBySingleField($column.field, '')" class="sorting-arrow sorting-arrow-down text-primary"></span>
					<span if.bind="$parent.sorting[$column.field] === 'asc'" click.trigger="$parent.sortBySingleField($column.field, 'desc')"
					class="sorting-arrow sorting-arrow-top text-primary"></span>
					<span if.bind="$parent.sorting[$column.field] === '' || $parent.sorting[$column.field] === undefined" click.trigger="$parent.sortBySingleField($column.field, 'asc')"
					class="sorting-arrow sorting-arrow-normal text-primary"></span>
				</span>
			</div>
			<div if.bind="showColumnFilters" class="grid-column-filters">
				<div repeat.for="$column of visibleColumns" class="${ $column.class !== '' ? $column.class : '' }">
					<div if.bind="$column.showFilter">
						<input class="form-control" value.bind="$column.filterValue" placeholder="filter..." input.delegate="$parent.updateFilters()">
						<span class="glyphicon glyphicon-search text-muted"></span>
					</div>
				</div>
			</div>
		</div>
		<!-- Content table -->
		<div class="table-content" show.bind="!showNoRowsMessage || (showNoRowsMessage && count > 0) || !loading">
			<div class="table-row" click.delegate="$parent.select($item)"></div>
		</div>
		<div show.bind="showNoRowsMessage && count === 0 || !loading" " class="alert alert-warning ">${ noRowsMessage }</div>
        <div class="grid-overlay " if.bind="loading "></div>
        <div if.bind="loading " class="progress grid-progress-indicator ">
            <div class="progress-bar progress-bar-striped active " role="progressbar ">
                <span>${ loadingMessage }</span>
            </div>
        </div>
        <!-- Footer div -->
        <div class="grid-footer-container " if.bind="pageable ">
            <pager page-size.bind="pageSize " num-to-show.bind="pagerSize " pager.ref="pager " on-page-changed.call="pageChanged($event)
		" show-first-last-buttons.bind="showFirstLastButtons " show-jump-buttons.bind="showJumpButtons "
                   show-paging-summary.bind="showPagingSummary " show-page-size-box.bind="showPageSizeBox
		" first-visible-item.bind="firstVisibleItem " last-visible-item.bind="lastVisibleItem " page-sizes.bind="pageSizes "
                   hide-jump-buttons-if-not-possible.bind="hideJumpButtonsIfNotPossible " count.bind="count "></pager>
        </div>
    </div>
</template>