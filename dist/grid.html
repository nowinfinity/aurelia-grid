<template>
	<style>
		.button {
			border: none;
			color: white;
			padding: 5px 22px;
			text-align: center;
			text-decoration: none;
			display: inline-block;
			font-size: 16px;
			margin: 4px 2px;
			cursor: pointer;
			border-radius: 5px;
		}
		
		.button-blue {
			background-color: #008CBA;
		}
		
		.button-red {
			background-color: #f44336;
		}
		
		.button-gray {
			background-color: #e7e7e7;
			color: black;
		}
		
		.button-black {
			background-color: #555555;
		}
		
		.button-green {
			background-color: #4CAF50;
		}
		
		.sorting-arrow {
			float: right;
			margin-right: 10px;
			width: 20px;
			height: 20px;
		}
		
		.sorting-arrow.sorting-arrow-top {
			background: url(../images/a_up.png);
			background-size: 20px 20px;
		}
		
		.sorting-arrow.sorting-arrow-search {
			background: url(../images/a_search.png);
			background-size: 20px 20px;
		}
		
		.sorting-arrow.sorting-arrow-search-active {
			background: url(../images/a_search_active.png);
			background-size: 20px 20px;
		}
		
		.sorting-arrow.sorting-arrow-down {
			background: url(../images/a_down.png);
			background-size: 20px 20px;
		}
		
		.sorting-arrow.sorting-arrow-normal {
			background: url(../images/a_default.png);
			background-size: 20px 20px;
		}
		
		.grid-progress-indicator {
			padding: 10px;
		}
		
		/*.sorting-container {
			position: absolute;
			background: white;
			z-index: 100;
			padding: 10px;
			padding: 5px 0px;
		}*/
		
		/*.button-container {
			margin-left: 10px;
		}*/
		
		.loader {
			color: #408CDC;
			font-size: 10px;
			margin: 120px auto;
			width: 1em;
			height: 1em;
			border-radius: 50%;
			position: relative;
			text-indent: -9999em;
			-webkit-animation: load4 1.3s infinite linear;
			animation: load4 1.3s infinite linear;
			-webkit-transform: translateZ(0);
			-ms-transform: translateZ(0);
			transform: translateZ(0);
		}
		
		/*.sorting-container > .content > select {
			height: 200px;
			overflow: auto;
			width: 100%;
			border: none;
			padding: 10px;
			overflow-x: hidden;
		}*/
		.sorting-container > .content > select {
			width: 100%;
		}
        
        .alert-warning {
            text-align:center;
            margin-top:30px;
        }
		@-webkit-keyframes load4 {
			0%,
			100% {
				box-shadow: 0 -3em 0 0.2em, 2em -2em 0 0em, 3em 0 0 -1em, 2em 2em 0 -1em, 0 3em 0 -1em, -2em 2em 0 -1em, -3em 0 0 -1em, -2em -2em 0 0;
			}
			12.5% {
				box-shadow: 0 -3em 0 0, 2em -2em 0 0.2em, 3em 0 0 0, 2em 2em 0 -1em, 0 3em 0 -1em, -2em 2em 0 -1em, -3em 0 0 -1em, -2em -2em 0 -1em;
			}
			25% {
				box-shadow: 0 -3em 0 -0.5em, 2em -2em 0 0, 3em 0 0 0.2em, 2em 2em 0 0, 0 3em 0 -1em, -2em 2em 0 -1em, -3em 0 0 -1em, -2em -2em 0 -1em;
			}
			37.5% {
				box-shadow: 0 -3em 0 -1em, 2em -2em 0 -1em, 3em 0em 0 0, 2em 2em 0 0.2em, 0 3em 0 0em, -2em 2em 0 -1em, -3em 0em 0 -1em, -2em -2em 0 -1em;
			}
			50% {
				box-shadow: 0 -3em 0 -1em, 2em -2em 0 -1em, 3em 0 0 -1em, 2em 2em 0 0em, 0 3em 0 0.2em, -2em 2em 0 0, -3em 0em 0 -1em, -2em -2em 0 -1em;
			}
			62.5% {
				box-shadow: 0 -3em 0 -1em, 2em -2em 0 -1em, 3em 0 0 -1em, 2em 2em 0 -1em, 0 3em 0 0, -2em 2em 0 0.2em, -3em 0 0 0, -2em -2em 0 -1em;
			}
			75% {
				box-shadow: 0em -3em 0 -1em, 2em -2em 0 -1em, 3em 0em 0 -1em, 2em 2em 0 -1em, 0 3em 0 -1em, -2em 2em 0 0, -3em 0em 0 0.2em, -2em -2em 0 0;
			}
			87.5% {
				box-shadow: 0em -3em 0 0, 2em -2em 0 -1em, 3em 0 0 -1em, 2em 2em 0 -1em, 0 3em 0 -1em, -2em 2em 0 0, -3em 0em 0 0, -2em -2em 0 0.2em;
			}
		}
		
		@keyframes load4 {
			0%,
			100% {
				box-shadow: 0 -3em 0 0.2em, 2em -2em 0 0em, 3em 0 0 -1em, 2em 2em 0 -1em, 0 3em 0 -1em, -2em 2em 0 -1em, -3em 0 0 -1em, -2em -2em 0 0;
			}
			12.5% {
				box-shadow: 0 -3em 0 0, 2em -2em 0 0.2em, 3em 0 0 0, 2em 2em 0 -1em, 0 3em 0 -1em, -2em 2em 0 -1em, -3em 0 0 -1em, -2em -2em 0 -1em;
			}
			25% {
				box-shadow: 0 -3em 0 -0.5em, 2em -2em 0 0, 3em 0 0 0.2em, 2em 2em 0 0, 0 3em 0 -1em, -2em 2em 0 -1em, -3em 0 0 -1em, -2em -2em 0 -1em;
			}
			37.5% {
				box-shadow: 0 -3em 0 -1em, 2em -2em 0 -1em, 3em 0em 0 0, 2em 2em 0 0.2em, 0 3em 0 0em, -2em 2em 0 -1em, -3em 0em 0 -1em, -2em -2em 0 -1em;
			}
			50% {
				box-shadow: 0 -3em 0 -1em, 2em -2em 0 -1em, 3em 0 0 -1em, 2em 2em 0 0em, 0 3em 0 0.2em, -2em 2em 0 0, -3em 0em 0 -1em, -2em -2em 0 -1em;
			}
			62.5% {
				box-shadow: 0 -3em 0 -1em, 2em -2em 0 -1em, 3em 0 0 -1em, 2em 2em 0 -1em, 0 3em 0 0, -2em 2em 0 0.2em, -3em 0 0 0, -2em -2em 0 -1em;
			}
			75% {
				box-shadow: 0em -3em 0 -1em, 2em -2em 0 -1em, 3em 0em 0 -1em, 2em 2em 0 -1em, 0 3em 0 -1em, -2em 2em 0 0, -3em 0em 0 0.2em, -2em -2em 0 0;
			}
			87.5% {
				box-shadow: 0em -3em 0 0, 2em -2em 0 -1em, 3em 0 0 -1em, 2em 2em 0 -1em, 0 3em 0 -1em, -2em 2em 0 0, -3em 0em 0 0, -2em -2em 0 0.2em;
			}
		}
	</style>

	<script id="filtering-template" type="text/html">
		<div class="sorting-container">
			<div class="content">
				<select id="custom-filter-select" class="custom-select" multiple="multiple">
				</select>
			</div>
			<div class="button-container">
				<button class="button button-green">Apply</button>
				<button class="button button-red">Clear</button>
			</div>
		</div>
	</script>

	<require from="./pager"></require>

	<div class="grid-container table  ${class}">
		<!-- Header table -->
		<div
			if.bind="showColumnHeaders"
			class="table-row table-head"
		>
			<template repeat.for="$column of visibleColumns" >

			<div
				class="${ $column.class !== '' ? $column.class : '' } ${ 'header-' + $column.field }"
				if.bind="isDisplayColumn($column.showColNameIf, $column.hideColNameIf, showColName)"
			>

				<a if.bind="$column.nosort == false && $parent.sortable" click.trigger="$parent.customSort($column)">
					${ $column.heading }
				</a>

				<span if.bind="$column.nosort == true || !$parent.sortable" innerhtml.bind="$column.heading">
				</span>

				<span if.bind="$column.filtering == 'true'">

					<span
						if.bind="$parent.sorting[$column.field] === 'desc'"
						click.trigger="$parent.sortBySingleField($column.field, '')"
						class="sorting-arrow sorting-arrow-down text-primary"
					></span>

					<span
						if.bind="$parent.sorting[$column.field] === 'asc'"
						click.trigger="$parent.sortBySingleField($column.field, 'desc')"
						class="sorting-arrow sorting-arrow-top text-primary"
					></span>

					<span
						if.bind="$parent.sorting[$column.field] === '' || $parent.sorting[$column.field] === undefined"
						click.trigger="$parent.sortBySingleField($column.field, 'asc')"
						class="sorting-arrow sorting-arrow-normal text-primary"
					></span>

				</span>

				<span
					if.bind="$column['filtering-by-property'] == 'true'"
					click.trigger="$parent.customSort($column)"
					class="sorting-arrow sorting-arrow-search text-primary">
				</span>

			</div>

			</template>
			<div if.bind="showColumnFilters" class="grid-column-filters">
				<div repeat.for="$column of visibleColumns" class="${ $column.class !== '' ? $column.class : '' }">
					<div if.bind="$column.showFilter">
						<input class="form-control" value.bind="$column.filterValue" placeholder="filter..." input.delegate="$parent.updateFilters()">
						<span class="glyphicon glyphicon-search text-muted"></span>
					</div>
				</div>
			</div>
		</div>
		<!-- Content table -->
		<div class="table-content" show.bind="!showNoRowsMessage || (showNoRowsMessage && count > 0) || !loading">
			<div class="table-row" click.delegate="$parent.select($item)"></div>
		</div>
		<div show.bind="showNoRowsMessage && count == 0 && !loading" class="alert alert-warning ">${ noRowsMessage }</div>
        <div class="grid-overlay " if.bind="loading "></div>
        
        <!-- Footer div -->
    </div>
	<div if.bind="loading " class="progress grid-progress-indicator ">
            <div class="loader ">${ loadingMessage}</div>
        </div>
	<div class="grid-container table  ${class} grid-container-outer">
		<div class="grid-footer-container " if.bind="pageable && !loading && count > pageSize">
            <pager page-size.bind="pageSize " num-to-show.bind="pagerSize " pager.ref="pager " on-page-changed.call="pageChanged($event)
		" show-first-last-buttons.bind="showFirstLastButtons " show-jump-buttons.bind="showJumpButtons "
                   show-paging-summary.bind="showPagingSummary " show-page-size-box.bind="showPageSizeBox
		" first-visible-item.bind="firstVisibleItem " last-visible-item.bind="lastVisibleItem " page-sizes.bind="pageSizes "
                   hide-jump-buttons-if-not-possible.bind="hideJumpButtonsIfNotPossible " count.bind="count "></pager>
        </div>
	</div>
</template>
